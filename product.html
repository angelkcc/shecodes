<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="s1.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.css"
        integrity="sha512-VcyUgkobcyhqQl74HS1TcTMnLEfdfX6BbjhH8ZBjFU9YTwHwtoRtWSGzhpDVEJqtMlvLM2z3JIixUOu63PNCYQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
        integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
  <title>Products</title>
</head>
<body>
    <body class="ff-tnr">
        <div class="container-fluid grey-back">
            <div class="container-fluid">
                <div class="container p-0">
                    <div class="row ">
                        <div class="col-6 p-0 d-flex float-start p-1">
                            <div class="logo-agri">
                                <img src="pictures/ae (2).png" class="w-100">
                            </div>
                        </div>
                        <div class="col-6 p-0">
                            <ul class="d-flex list-unstyled float-end mb-0 p-2 fw-bold">
                                <a href="#" class="site-top-menu">
                                    <li>Find a Store</li>
                                </a>
                                <li class="site-top-menu">|</li>
                                <a href="#" class="site-top-menu">
                                    <li>Help</li>
                                </a>
                                <li class="site-top-menu">|</li>
                                <a href="#" class="site-top-menu">
                                    <li>Join Us</li>
                                </a>
                                <li class="site-top-menu">|</li>
                                <a href="#" class="site-top-menu">
                                    <li>Sign</li>
                                </a>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
    
            <div class="container-fluid white-back py-2">
                <div class="container p-0">
                    <div class="row">
                        <div class="col-3 p-0">
                            <div class="logo">
                                <img src="pictures/agritiallogo.png" class="w-100">
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="col-12">
                                <div class="sec-menu ">
                                    <ul class="d-flex align-content-center list-unstyled mb-0 fw-bold py-2">
                                        <a href="home.html" class="site-sec-menu">
                                            <li>Home</li>
                                        </a>
                                        <a href="aboutus.html" class="site-sec-menu">
                                            <li>About Us</li>
                                        </a>
                                        <a href="product.html" class="site-sec-menu">
                                            <li>Products</li>
                                        </a>
                                        <a href="consultation.html" class="site-sec-menu">
                                            <li>Consultant</li>
                                        </a>
                                        <a href="contactus.html" class="site-sec-menu">
                                            <li>Contact us</li>
                                        </a>
                                        <a href="loyalty.html" class="site-sec-menu">
                                            <li>Loyalty</li>
                                        </a>
                                        <a href="faq.html" class="site-sec-menu">
                                            <li>FAQ's</li>
                                        </a>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-3 p-0">
                            <div class="row d-flex align-items-center">
                                <div class="col-6">
                                    <div class="site-search-menu">
                                        <div class="input-group rounded">
                                            <input type="search" class="form-control rounded" placeholder="Search"
                                                aria-label="Search" aria-describedby="search-addon" />
                                            <span class="input-group-text border-0" id="search-addon">
                                                <i class="fas fa-search"></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <i class="px-2 icon fa-regular fa-heart"></i>
                                    <a href="orderpage.html"><i
                                            class="px-2 icon fa-solid fa-cart-shopping site-top-menu"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    <header>
        <h1>Farm Product store</h1>
        <div class="cart-container">
        <button id="cart-btn">ðŸ›’ Cart (0)</button>
    </div>
    </header>
    <div class="productlist">
        <div class="product-card">
            <img src="pictures/tomato.jpg" alt="Seed">
            <h3>tomato seeds</h3>
            <p class="price">NPR 500</p>
      <button class="add-to-cart" data-product="Tomato Seeds" data-price="500">Add to Cart</button>
        </div>
        <div class="product-card">
            <img src="pictures/cucumber.jpg" alt="cucumber seeds">
            <h3>Cucumber seeds</h3>
            <p class="price">NPR 100</p>
            <button class="add-to-cart" data-product="Cucumber Seeds" data-price="100">Add to Cart</button>
          </div>

          <div class="product-card">
            <img src="pictures/wheatseeds.jpg" alt="Seed">
            <h3>Wheat Seeds</h3>
            <p class="price">NPR 700</p>
            <button class="add-to-cart" data-product="Wheat Seeds" data-price="700">Add to Cart</button>
          </div>
    <div class="product-card">
        <img src="pictures/carrot.jpg" alt="Seed">
        <h3>Carrot seeds</h3>
        <p class="price">NPR 700</p>
        <button class="add-to-cart" data-product="Carrot Seeds" data-price="700">Add to Cart</button>
      </div>
      <div class="product-card">
        <img src="pictures/spinach.jpg" alt="Seed">
        <h3>Spinach Seeds</h3>
        <p class="price">NPR 600</p>
        <button class="add-to-cart" data-product="Spinach Seeds" data-price="600">Add to Cart</button>
      </div>
      <div class="product-card">
        <img src="pictures/neemcake.jpg" alt="Fertilizer">
        <h3>Neem Cake Fertilizer</h3>
        <p class="price">NPR 1200</p>
        <button class="add-to-cart" data-product="Neem Cake Fertilizer" data-price="1200">Add to Cart</button>
      </div>
      <div class="product-card">
        <img src="pictures/seaweed.jpg" alt="Fertilizer">
        <h3>Seaweed Fertilizer</h3>
        <p class="price">NPR 1500</p>
        <button class="add-to-cart" data-product="Seaweed Fertilizer" data-price="1500">Add to Cart</button>
      </div>

      <div class="product-card">
        <img src="pictures/vermi.jpg" alt="Fertilizer">
        <h3>Vermi Compost Fertilizer</h3>
        <p class="price">NPR 1600</p>
        <button class="add-to-cart" data-product="Vermi Compost Fertilizer" data-price="1600">Add to Cart</button>
      </div>
 <div class="product-card">
        <img src="pictures/bonemeal.jpg" alt="Fertilizer">
        <h3>Bone Meal Fertilizer</h3>
        <p class="price">NPR 1400</p>
        <button class="add-to-cart" data-product="Bone Meal Fertilizer" data-price="1400">Add to Cart</button>
      </div>
    </div>
    </div>
     <!-- Cart Modal -->
     <div id="cart-modal" class="cart-modal">
        <div class="cart-modal-content">
          <h2>Your Cart</h2>
          <ul id="cart-items"></ul>
          <p id="total-price">Total: $0.00</p>
          <button id="checkout-btn">Proceed to Checkout</button>
          <button id="close-cart-btn">Close</button>
        </div>
      </div>
      <script>document.addEventListener("DOMContentLoaded", async function () {
        const productList = document.querySelector(".productlist");
    
        try {
            const response = await fetch("http://localhost:3000/product");
            const products = await response.json();
    
            // Clear existing static products
            productList.innerHTML = "";
    
            products.forEach(product => {
                const productCard = document.createElement("div");
                productCard.classList.add("product-card");
                
                productCard.innerHTML = `
                    <img src="${product.url}" alt="${product.name}">
                    <h3>${product.name}</h3>
                    <p class="price">NPR ${product.price}</p>
                    <button class="add-to-cart" data-product="${product.name}" data-price="${product.price}">Add to Cart</button>
                `;
    
                productList.appendChild(productCard);
            });
        } catch (error) {
            console.error("Error fetching products:", error);
        }
    
        // Cart Functionality
        const cart = [];
        document.addEventListener("click", function (event) {
            if (event.target.classList.contains("add-to-cart")) {
                const productName = event.target.getAttribute("data-product");
                const productPrice = parseFloat(event.target.getAttribute("data-price"));
                
                const existingItem = cart.find(item => item.name === productName);
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({ name: productName, price: productPrice, quantity: 1 });
                }
    
                updateCart();
            }
        });
    
        function updateCart() {
            const cartBtn = document.getElementById("cart-btn");
            const cartModal = document.getElementById("cart-modal");
            const cartItemsContainer = document.getElementById("cart-items");
            const totalPriceContainer = document.getElementById("total-price");
    
            cartItemsContainer.innerHTML = "";
            let total = 0;
    
            cart.forEach(item => {
                total += item.price * item.quantity;
                const listItem = document.createElement("li");
                listItem.textContent = `${item.name} x${item.quantity} - NPR ${item.price * item.quantity}`;
                cartItemsContainer.appendChild(listItem);
            });
    
            totalPriceContainer.textContent = `Total: NPR ${total}`;
            cartBtn.textContent = `ðŸ›’ Cart (${cart.reduce((sum, item) => sum + item.quantity, 0)})`;
        }
    
        document.getElementById("cart-btn").addEventListener("click", function () {
            document.getElementById("cart-modal").style.display = "block";
        });
    
        document.getElementById("close-cart-btn").addEventListener("click", function () {
            document.getElementById("cart-modal").style.display = "none";
        });
    });
    </script>
  
</body>
</html>